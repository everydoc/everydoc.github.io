# 服务器配置

## 群晖虚拟机设置

### 开启IPv6

通过克隆基础版本centos虚拟机，导致系统无法获取到IPv6，这是因为网卡的uuid一致导致的，需要到`/etc/sysconfig/network-script/ifcfg-xxx`修改UUID。



### 装载工具

在虚拟机的编辑-->其它，其它ISO文件选择synology-vmm-guest-tool,并在虚拟机执行，`yum -y install qemu-guest-agent`。



### 安装动态域名解析DDNS

下载GitHub的ddns-go，并根据其说明安装配置

如果有docker，执行`docker run -d --name ddns --restart=always --net=host -v /etc/ddns-go:/root jeessy/ddns-go:latest`

#### 配置

> 300443
> 0cac346013efcabf7b2a096364963136





### 防火墙



1. 开通指定端口：`firewall-cmd --add-port=9876/tcp --zone=public --permanent`
2. 刷新防火墙：`firewall-cmd --reload`
3. 查看开通端口：`firewall-cmd --zone=public --list-ports`
4. 不安全策略，关闭防火墙：`systemctl disable firewalld`



## 一般vps配置

```shell
# 设置快捷键
cat >> ~/.bashrc <<EOF
alias cc='sync; echo 3 > /proc/sys/vm/drop_caches'
alias fm='free -m'
# Dnspod token
export DP_Id="300443"
export DP_Key="0cac346013efcabf7b2a096364963136"
EOF

soruce .bashrc

# 安装docker
curl https://get.docker.com | sh
systemctl enable docker && systemctl start docker

# 安装nginx
yum -y install nginx
systemctl enable nginx && systemctl start nginx

# 申请ssl证书
curl https://get.acme.sh | sh -s email=helloalanturing@icloud.com
acme.sh --issue --dns dns_pd -d imjcker.com -d *.imjcker.com
# 无法获取脚本的话使用git克隆
git clone https://github.com/acmesh-official/acme.sh.git
cd ./acme.sh
./acme.sh --install -m helloalanturing@icloud.com

# 安装v2ray
curl https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh -o v2ray.sh && chmod +x v2ray.sh && sh v2ray.sh
# v2raya 
docker run -d \
  --restart=always \
  --privileged \
  --network=host \
  --name v2raya \
  -e V2RAYA_LOG_FILE=/tmp/v2raya.log \
  -v /lib/modules:/lib/modules:ro \
  -v /etc/resolv.conf:/etc/resolv.conf \
  -v /etc/v2raya:/etc/v2raya \
  mzz2017/v2raya

# 启动frps

```

